<div id="preview-box" class="preview-box" [style.display]="this.previewImage || this.user?.photoURL ? 'flex' : 'none'">
  <div class="preview-box" style="display: flex">
    <p>変更前</p>
    <img *ngIf="this.user?.photoURL; else noAvatar" id="original" [src]="this.user?.photoURL" alt="Original Avatar" />
  </div>
  <div class="preview-box" [style.display]="this.photoPreview ? 'flex' : 'none'">
    <p>変更後</p>
    <img crossorigin="anonymous" [attr.src]="this.photoPreview" alt="New Avatar" #previewImage />
    <p>圧縮後</p>
    <canvas height="100" width="100" #photoCanvas></canvas>
  </div>
  <input name="avatar" id="preview-input" type="file" accept="image/png, image/jpeg"
    (input)="this.handleFileInput($event)" required />
  <label class="photo-label" for="preview-input"><span>{{ this.filename ?? 'Select Photo' }}</span></label>
</div>
<ng-template [ngIf]="!(this.user?.photoURL || this.previewImage)" #noAvatar>
  <p>写真がない</p>
</ng-template>

<form (submit)="this.handleSubmit($event)">
  <input type="file" name="avatar" required #fileInput />
  <button type="submit">
    <base-spinner *ngIf="this.loading; else notLoading" color="white"></base-spinner>
    <ng-template #notLoading>アップロード</ng-template>
  </button>
</form>
